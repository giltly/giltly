(function(a){if(typeof define==="function"&&define.amd)define(a);else window.purl=a()})(function(){var j={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},p=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],k={anchor:"fragment"},l={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},c=/^[0-9]+$/;function i(g,c){var f=decodeURI(g),d=l[c||false?"strict":"loose"].exec(f),a={attr:{},param:{},seg:{}},b=14;while(b--)a.attr[p[b]]=d[b]||"";a.param.query=e(a.attr.query);a.param.fragment=e(a.attr.fragment);a.seg.path=a.attr.path.replace(/^\/+|\/+$/g,"").split("/");a.seg.fragment=a.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");a.attr.base=a.attr.host?(a.attr.protocol?a.attr.protocol+"://"+a.attr.host:a.attr.host)+(a.attr.port?":"+a.attr.port:""):"";return a}function h(b){var a=b.tagName;return typeof a!=="undefined"?j[a.toLowerCase()]:a}function f(a,b){if(a[b].length===0)return a[b]={};var c={};for(var d in a[b])c[d]=a[b][d];a[b]=c;return c}function d(j,b,e,i){var h=j.shift();if(!h)if(a(b[e]))b[e].push(i);else if("object"==typeof b[e])b[e]=i;else if("undefined"==typeof b[e])b[e]=i;else b[e]=[b[e],i];else{var g=b[e]=b[e]||[];if("]"==h)if(a(g))""!==i&&g.push(i);else if("object"==typeof g)g[o(g).length]=i;else g=b[e]=[b[e],i];else if(~h.indexOf("]")){h=h.substr(0,h.length-1);if(!c.test(h)&&a(g))g=f(b,e);d(j,g,h,i)}else{if(!c.test(h)&&a(g))g=f(b,e);d(j,g,h,i)}}}function n(b,e,f){if(~e.indexOf("]")){var i=e.split("[");d(i,b,"base",f)}else{if(!c.test(e)&&a(b.base)){var h={};for(var g in b.base)h[g]=b.base[g];b.base=h}e!==""&&q(b.base,e,f)}return b}function e(a){return m(String(a).split(/&|;/),function(f,a){try{a=decodeURIComponent(a.replace(/\+/g," "))}catch(h){}var e=a.indexOf("="),d=g(a),c=a.substr(0,d||e),b=a.substr(d||e,a.length);b=b.substr(b.indexOf("=")+1,b.length);if(c===""){c=a;b=""}return n(f,c,b)},{base:{}}).base}function q(d,c,e){var b=d[c];if(typeof b==="undefined")d[c]=e;else if(a(b))b.push(e);else d[c]=[b,e]}function g(d){for(var e=d.length,c,a,b=0;b<e;++b){a=d[b];if("]"==a)c=false;if("["==a)c=true;if("="==a&&!c)return b}}function m(b,d){var a=0,e=b.length>>0,c=arguments[2];while(a<e){if(a in b)c=d.call(undefined,c,b[a],a,b);++a}return c}function a(a){return Object.prototype.toString.call(a)==="[object Array]"}function o(c){var a=[];for(var b in c)c.hasOwnProperty(b)&&a.push(b);return a}function b(a,b){if(arguments.length===1&&a===true){b=true;a=undefined}b=b||false;a=a||window.location.toString();return{data:i(a,b),attr:function(a){a=k[a]||a;return typeof a!=="undefined"?this.data.attr[a]:this.data.attr},param:function(a){return typeof a!=="undefined"?this.data.param.query[a]:this.data.param.query},fparam:function(a){return typeof a!=="undefined"?this.data.param.fragment[a]:this.data.param.fragment},segment:function(a){if(typeof a==="undefined")return this.data.seg.path;else{a=a<0?this.data.seg.path.length+a:a-1;return this.data.seg.path[a]}},fsegment:function(a){if(typeof a==="undefined")return this.data.seg.fragment;else{a=a<0?this.data.seg.fragment.length+a:a-1;return this.data.seg.fragment[a]}}}}b.jQuery=function(a){if(a!=null){a.fn.url=function(d){var c="";if(this.length)c=a(this).attr(h(this[0]))||"";return b(c,d)};a.url=b}};b.jQuery(window.jQuery);return b});