(function(a){a.widget("metro.times",{version:"1.0.0",options:{style:{background:"bg-dark",foreground:"fg-white",divider:"fg-dark"},blink:true,alarm:{h:0,m:0,s:0},ontick:function(){},onalarm:function(){}},wrappers:{},_interval:0,_create:function(){var d=this,b=this.element;a.each(["Hours","Minutes","Seconds"],function(){a('<span class="count'+this+'">').html('<span class="digit-wrapper">                        <span class="digit">0</span>                    </span>                    <span class="digit-wrapper">                        <span class="digit">0</span>                    </span>').appendTo(b);this!="Seconds"&&b.append('<span class="divider"></span>')});this.wrappers=this.element.find(".digit-wrapper");if(b.data("blink")!=undefined)this.options.blink=b.data("blick");if(b.data("styleBackground")!=undefined)this.options.style.background=b.data("styleBackground");if(b.data("styleForeground")!=undefined)this.options.style.foreground=b.data("styleForeground");if(b.data("styleDivider")!=undefined)this.options.style.divider=b.data("styleDivider");this.options.style.background!="default"&&this.element.find(".digit").addClass(this.options.style.background);this.options.style.foreground!="default"&&this.element.find(".digit").addClass(this.options.style.foreground);this.options.style.divider!="default"&&this.element.find(".divider").addClass(this.options.style.divider);if(b.data("alarm")!=undefined){var c=b.data("alarm").split(":");this.options.alarm.h=c[0]!=undefined?c[0]:0;this.options.alarm.m=c[1]!=undefined?c[1]:0;this.options.alarm.s=c[2]!=undefined?c[2]:0}b.data("onalarm")!=undefined;setTimeout(function(){d.tick()},1e3)},_destroy:function(){},_setOption:function(b,a){this._super("_setOption",b,a)},tick:function(){var a=this;this._interval=setInterval(function(){var f=new Date,c,d,e;c=f.getHours();a.updateDuo(0,1,c);d=f.getMinutes();a.updateDuo(2,3,d);e=f.getSeconds();a.updateDuo(4,5,e);a.options.ontick(c,d,e);a.blinkDivider();var b=a.options.alarm;if(b)if(b.h!=undefined&&b.h==c&&(b.m!=undefined&&b.m==d)&&(b.s!=undefined&&b.s==e)){a.options.onalarm();a._trigger("alarm")}},1e3)},blinkDivider:function(){this.options.blink&&this.element.find(".divider").toggleClass("no-visible")},updateDuo:function(c,b,a){this.switchDigit(this.wrappers.eq(c),Math.floor(a/10)%10);this.switchDigit(this.wrappers.eq(b),a%10)},switchDigit:function(c,d){var e=c.find(".digit");if(e.is(":animated"))return false;if(c.data("digit")==d)return false;c.data("digit",d);var b=a("<span>",{"class":"digit",css:{top:"-2.1em",opacity:0},html:d});b.addClass(this.options.style.background);b.addClass(this.options.style.foreground);e.before(b).removeClass("static").animate({top:"2.5em",opacity:0},"fast",function(){e.remove()});b.delay(100).animate({top:0,opacity:1},"fast");return true}})})(jQuery);$(function(){$("[data-role=times]").times()});