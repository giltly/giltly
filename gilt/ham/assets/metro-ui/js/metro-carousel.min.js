(function(a){a.widget("metro.carousel",{version:"1.0.0",options:{auto:true,period:2e3,duration:500,effect:"slowdown",direction:"left",markers:{show:true,type:"default",position:"left"},controls:true,stop:true,width:"100%",height:300},_slides:{},_currentIndex:0,_interval:0,_outPosition:0,_create:function(){var a=this,b=this.element,c=b.find(".controls");b.css({width:this.options.width,height:this.options.height});this._slides=b.find(".slide");if(this._slides.length<=1)return;this.options.markers!==false&&this.options.markers.show&&this._slides.length>1&&this._markers(a);if(this.options.controls&&this._slides.length>1){b.find(".controls.left").on("click",function(){a._slideTo("prior")});b.find(".controls.right").on("click",function(){a._slideTo("next")})}else c.hide();if(this.options.stop)b.on("mouseenter",function(){clearInterval(a._interval)}).on("mouseleave",function(){if(a.options.auto)a._autoStart(),a.options.period});this.options.auto&&this._autoStart()},_autoStart:function(){var a=this;this._interval=setInterval(function(){if(a.options.direction=="left")a._slideTo("next");else a._slideTo("prior")},this.options.period)},_slideTo:function(d){var c=this._slides[this._currentIndex],b;if(d==undefined)d="next";if(d==="prior"){this._currentIndex-=1;if(this._currentIndex<0)this._currentIndex=this._slides.length-1;this._outPosition=this.element.width()}else if(d==="next"){this._currentIndex+=1;if(this._currentIndex>=this._slides.length)this._currentIndex=0;this._outPosition=-this.element.width()}b=this._slides[this._currentIndex];switch(this.options.effect){case"switch":this._effectSwitch(c,b);break;case"slowdown":this._effectSlowdown(c,b,this.options.duration);break;case"fade":this._effectFade(c,b,this.options.duration);break;default:this._effectSlide(c,b,this.options.duration)}var e=this.element,f=this;e.find(".markers ul li a").each(function(){var b=a(this).data("num");if(b===f._currentIndex)a(this).parent().addClass("active");else a(this).parent().removeClass("active")})},_slideToSlide:function(c){var a=this._slides[this._currentIndex],b=this._slides[c];if(c>this._currentIndex)this._outPosition=-this.element.width();else this._outPosition=this.element.width();switch(this.options.effect){case"switch":this._effectSwitch(a,b);break;case"slowdown":this._effectSlowdown(a,b,this.options.duration);break;case"fade":this._effectFade(a,b,this.options.duration);break;default:this._effectSlide(a,b,this.options.duration)}this._currentIndex=c},_markers:function(f){var b,d,e,c,g;b=a('<div class="markers '+this.options.markers.type+'" />');d=a("<ul></ul>").appendTo(b);for(c=0;c<this._slides.length;c++){e=a('<li><a href="javascript:void(0)" data-num="'+c+'"></a></li>');c===0&&e.addClass("active");e.appendTo(d)}d.find("li a").removeClass("active").on("click",function(){var b=a(this),c=b.data("num");d.find("li").removeClass("active");b.parent().addClass("active");if(c==f._currentIndex)return true;f._slideToSlide(c);return true});b.appendTo(this.element);switch(this.options.markers.position){case"top-left":b.css({left:"10px",right:"auto",bottom:"auto",top:"10px"});break;case"top-right":b.css({left:"auto",right:"10px",bottom:"auto",top:"0px"});break;case"top-center":b.css({left:this.element.width()/2-b.width()/2,right:"auto",bottom:"auto",top:"0px"});break;case"bottom-left":b.css({left:"10px",right:"auto"});break;case"bottom-right":b.css({right:"10px",left:"auto"});break;case"bottom-center":b.css({left:this.element.width()/2-b.width()/2,right:"auto"})}},_effectSwitch:function(b,c){a(b).hide();a(c).css({left:0}).show()},_effectSlide:function(c,d,b){a(c).animate({left:this._outPosition},b);a(d).css("left",this._outPosition*-1).show().animate({left:0},b)},_effectSlowdown:function(c,d,e){var b={duration:e,easing:"doubleSqrt"};a.easing.doubleSqrt=function(a){return Math.sqrt(Math.sqrt(a))};a(c).animate({left:this._outPosition},b);a(d).css("left",this._outPosition*-1).show().animate({left:0},b)},_effectFade:function(c,d,b){a(c).fadeOut(b);a(d).css({left:0}).fadeIn(b)},_destroy:function(){},_setOption:function(b,a){this._super("_setOption",b,a)}})})(jQuery);$(function(){$("[data-role=carousel]").carousel()});