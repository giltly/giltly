var hasTouch="ontouchend"in window,eventTimer,moveDirection="undefined",startX,startY,deltaX,deltaY,mouseDown=false;function addTouchEvents(a){if(hasTouch){a.addEventListener("touchstart",touch2Mouse,true);a.addEventListener("touchmove",touch2Mouse,true);a.addEventListener("touchend",touch2Mouse,true)}}function touch2Mouse(c){var a=c.changedTouches[0],b;switch(c.type){case"touchstart":b="mousedown";break;case"touchend":b="mouseup";break;case"touchmove":b="mousemove";break;default:return}if(b=="mousedown"){eventTimer=(new Date).getMilliseconds();startX=a.clientX;startY=a.clientY;mouseDown=true}if(b=="mouseup"){if((new Date).getMilliseconds()-eventTimer<=500)b="click";mouseDown=false}if(b=="mousemove")if(mouseDown){deltaX=a.clientX-startX;deltaY=a.clientY-startY;moveDirection=deltaX>deltaY?"horizontal":"vertical"}var d=document.createEvent("MouseEvent");d.initMouseEvent(b,true,true,window,1,a.screenX,a.screenY,a.clientX,a.clientY,false,false,false,false,0,null);a.target.dispatchEvent(d);c.preventDefault()};