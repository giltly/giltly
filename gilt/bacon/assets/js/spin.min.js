(function(b,a){if(typeof exports=="object")module.exports=a();else if(typeof define=="function"&&define.amd)define(a);else b.Spinner=a()})(this,function(){"use strict";var k=["webkit","Moz","ms","O"],i={},e;function d(d,b){var c=document.createElement(d||"div"),a;for(a in b)c[a]=b[a];return c}function b(b){for(var a=1,c=arguments.length;a<c;a++)b.appendChild(arguments[a]);return b}var h=function(){var a=d("style",{type:"text/css"});b(document.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}();function n(a,d,j,g){var c=["opacity",d,~~(a*100),j,g].join("-"),b=.01+j/g*100,k=Math.max(1-(1-a)/d*(100-b),a),f=e.substring(0,e.indexOf("Animation")).toLowerCase(),l=f&&"-"+f+"-"||"";if(!i[c]){h.insertRule("@"+l+"keyframes "+c+"{0%{opacity:"+k+"}"+b+"%{opacity:"+a+"}"+(b+.01)+"%{opacity:1}"+(b+d)%100+"%{opacity:"+a+"}100%{opacity:"+k+"}}",h.cssRules.length);i[c]=1}return c}function f(e,a){var d=e.style,c,b;a=a.charAt(0).toUpperCase()+a.slice(1);for(b=0;b<k.length;b++){c=k[b]+a;if(d[c]!==undefined)return c}if(d[a]!==undefined)return a}function a(a,c){for(var b in c)a.style[f(a,b)||b]=c[b];return a}function l(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var c in d)if(a[c]===undefined)a[c]=d[c]}return a}function m(a){var b={x:a.offsetLeft,y:a.offsetTop};while(a=a.offsetParent)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function j(a,b){return typeof a=="string"?a:a[b%a.length]}var o={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function c(a){if(typeof this=="undefined")return new c(a);this.opts=l(a||{},c.defaults,o)}c.defaults={};l(c.prototype,{spin:function(f){this.stop();var c=this,b=c.opts,g=c.el=a(d(0,{className:b.className}),{position:b.position,width:0,zIndex:b.zIndex}),n=b.radius+b.length+b.width,h,i;if(f){f.insertBefore(g,f.firstChild||null);i=m(f);h=m(g);a(g,{left:(b.left=="auto"?i.x-h.x+(f.offsetWidth>>1):parseInt(b.left,10)+n)+"px",top:(b.top=="auto"?i.y-h.y+(f.offsetHeight>>1):parseInt(b.top,10)+n)+"px"})}g.setAttribute("role","progressbar");c.lines(g,c.opts);if(!e){var o=0,r=(b.lines-1)*(1-b.direction)/2,k,l=b.fps,j=l/b.speed,q=(1-b.opacity)/(j*b.trail/100),p=j/b.lines;(function s(){o++;for(var a=0;a<b.lines;a++){k=Math.max(1-(o+(b.lines-a)*p)%j*q,b.opacity);c.opacity(g,a*b.direction+r,k,b)}c.timeout=c.el&&setTimeout(s,~~(1e3/l))})()}return c},stop:function(){var a=this.el;if(a){clearTimeout(this.timeout);a.parentNode&&a.parentNode.removeChild(a);this.el=undefined}return this},lines:function(i,c){var f=0,k=(c.lines-1)*(1-c.direction)/2,g;function h(e,b){return a(d(),{position:"absolute",width:c.length+c.width+"px",height:c.width+"px",background:e,boxShadow:b,transformOrigin:"left",transform:"rotate("+~~(360/c.lines*f+c.rotate)+"deg) translate("+c.radius+"px,0)",borderRadius:(c.corners*c.width>>1)+"px"})}for(;f<c.lines;f++){g=a(d(),{position:"absolute",top:1+~(c.width/2)+"px",transform:c.hwaccel?"translate3d(0,0,0)":"",opacity:c.opacity,animation:e&&n(c.opacity,c.trail,k+f*c.direction,c.lines)+" "+1/c.speed+"s linear infinite"});c.shadow&&b(g,a(h("#000","0 0 4px #000"),{top:2+"px"}));b(i,b(g,h(j(c.color,f),"0 0 1px rgba(0,0,0,.1)")))}return i},opacity:function(a,b,c){if(b<a.childNodes.length)a.childNodes[b].style.opacity=c}});function p(){function e(b,a){return d("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',a)}h.addRule(".spin-vml","behavior:url(#default#VML)");c.prototype.lines=function(m,c){var f=c.length+c.width,g=2*f;function i(){return a(e("group",{coordsize:g+" "+g,coordorigin:-f+" "+-f}),{width:g,height:g})}var h=-(c.width+c.length)*2+"px",l=a(i(),{position:"absolute",top:h,left:h}),d;function k(d,h,g){b(l,b(a(i(),{rotation:360/c.lines*d+"deg",left:~~h}),b(a(e("roundrect",{arcsize:c.corners}),{width:f,height:c.width,left:c.radius,top:-c.width>>1,filter:g}),e("fill",{color:j(c.color,d),opacity:c.opacity}),e("stroke",{opacity:0}))))}if(c.shadow)for(d=1;d<=c.lines;d++)k(d,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(d=1;d<=c.lines;d++)k(d);return b(m,l)};c.prototype.opacity=function(e,c,d,b){var a=e.firstChild;b=b.shadow&&b.lines||0;if(a&&c+b<a.childNodes.length){a=a.childNodes[c+b];a=a&&a.firstChild;a=a&&a.firstChild;if(a)a.opacity=d}}}var g=a(d("group"),{behavior:"url(#default#VML)"});if(!f(g,"transform")&&g.adj)p();else e=f(g,"animation");return c});