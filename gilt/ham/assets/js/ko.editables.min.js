(function(a){if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object")a(require("knockout"),exports);else if(typeof define==="function"&&define.amd)define(["knockout","exports"],a);else a(ko)})(function(a,e){var f=function(b){return a.dependentObservable({read:b,deferEvaluation:true})},c="",b={_observables:{},add:function(b,c){if(!this._observables.hasOwnProperty(b))this._observables[b]=a.observableArray();this._observables[b].push(c)},"get":function(b){b=b===e?c:b;if(!this._observables.hasOwnProperty(b))throw new Error("Unknown scope "+b);return a.utils.unwrapObservable(this._observables[b])}};b._observables[c]=a.observableArray();function g(){return"_scope"+ ++g.counter}g.counter=0;var h={scalar:function(b,a){return b==a},array:function(a,b){a=a||[];b=b||[];if(a.length!=b.length)return false;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return false;return true}},i={enable:true,scope:c};a.extenders.editable=function(d,g){if(d.hasOwnProperty("editable"))return d;if(typeof g!="object")g={enable:g===e?true:g,scope:c};else g=a.utils.extend(a.utils.extend({},i),g);d.editable=g.enable;if(!d.editable)return d;var k,l=h.scalar,j=d.inTransaction=a.observable(false);d.beginEdit=function(){if(j())return;var a=d();if(a instanceof Array){a=a.slice();l=h.array}k=a;j(true)};d.commit=function(){j(false)};d.rollback=function(){if(j()){d(k);j(false)}};d.oldValue=function(){return k};d.hasChanges=f(function(){return j()&&!l(d(),k)});g.scope!==false&&b.add(g.scope,d);return d};function d(f,h,g,c){c=c||[];for(var j in f){var b=f[j];if(a.isWriteableObservable(b))if(b.editable!==false){b.extend({editable:{enable:true,scope:h}});g.push(b)}if(a.utils.arrayIndexOf(c,b)>-1)continue;c.push(b);var e=a.utils.unwrapObservable(b);if(typeof e=="object"){var i=a.isObservable(b);if(i){if(a.utils.arrayIndexOf(c,e)>-1)continue;c.push(e)}d(e,h,g,c)}}}a.editable=function(b,h){if(typeof b.beginEdit=="function")return;h=h===e?true:h;var c=a.observableArray();b.beginEdit=function(){a.utils.arrayForEach(c(),function(a){a.beginEdit()})};b.commit=function(){a.utils.arrayForEach(c(),function(a){a.commit()})};b.rollback=function(){a.utils.arrayForEach(c(),function(a){a.rollback()})};b.hasChanges=f(function(){var b=a.utils.arrayFirst(c(),function(a){return a.hasChanges()});return b!=null});var i=g();b.addEditable=function(a){d(a,i,c,[])};h&&d(b,i,c,[])};a.editable.enable=function(b,a){if(a===e)a=c;d(b,a,[])};a.editable.beginEdit=function(c){a.utils.arrayForEach(b.get(c),function(a){a.beginEdit()})};a.editable.commit=function(c){a.utils.arrayForEach(b.get(c),function(a){a.commit()})};a.editable.rollback=function(c){a.utils.arrayForEach(b.get(c),function(a){a.rollback()})};a.editable.hasChanges=function(d){for(var c=b.get(d),a=0,e=c.length;a<e;a++)if(c[a].hasChanges())return true;return false};a.editable._editables=b;a.editable.getHasChangesFlag=function(b){return f(function(){return a.editable.hasChanges(b)}).extend({throttle:100})}});